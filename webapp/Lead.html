<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html>
<head>
<link href="styles/lead_style.css" rel="stylesheet" type="text/css" />
<title>Infographics Generator</title>
        <script type="text/javascript">
            function DrawMail(c, x, y, kpiMail, kpiPhone)
            {
			        var canvas = document.getElementById(c);
					var context = canvas.getContext("2d");
                	img = new Image();
					img.src = 'images/response.png';
					context.fillStyle="#FFA54F";
					var kpiTotal = kpiMail + kpiPhone;
					var MailP = kpiMail/kpiTotal;
					var PhoneP= kpiPhone/kpiTotal;
					//document.write(MailP);
					//draw rectangle in the back of the mail image
					if(MailP <= 0.5)
					{
						fillW= 700 * MailP; 
						fillH = 50;
						MailP = 0;
					}
					else if(MailP > 0.5)
					{
						MailP = MailP-0.5;
						fillW= 350; 
						fillH = 50;
					}
					context.fillRect(x+10, y+10, fillW, fillH);
					if(MailP > 0)
					{
						fillW= 700 * MailP;
						fillH = 50;

						context.fillRect(x+10,y+100, fillW, fillH);
					}
				
					//draw rectangle in the back of the phone image
					if(PhoneP <= 0.5)
					{
						fillW= 760 * PhoneP; 
						//fillW = 350
						fillH = 80;
						PhoneP = 0;
					}
					else if(PhoneP > 0.5)
					{
						PhoneP = PhoneP-0.5;
						fillW= 760/2; 
						fillH = 80;
					}
					context.fillRect(x+740, y+80, x-fillW, fillH);				
					if(PhoneP > 0)
					{
						fillW= 760 * PhoneP;
						fillH = 80;

						context.fillRect(x+740,y+8, x-fillW, fillH);
					}					
					
					
					img.onload = function()
					{
						context.drawImage(img, x, y, img.width/4.29, img.height/4.29);
					}
            }


            window.onload = function(){
                var canvas = document.getElementById("myCanvas");
                var context = canvas.getContext("2d");
                context.canvas.width = window.innerWidth;
                //context.canvas.height = window.innerHeight;

                // data
                var month = "May";
                var year = "2012";

                // fake kpi
                var kpiMail = 1602;
				var kpiPhone = 687;

				DrawMail("myCanvas", 20, 657, kpiMail, kpiPhone);

            };
 
        </script>
    </head>
<body>
<div id="ele">
	<img src="images/lead_ele.png"/>
</div>
<canvas id="myCanvas" width="1550" height="1500">
<!-- Insert fallback content here -->
Sorry, your browser doesn't support canvas technology
</canvas>

</body>
</html>