<!DOCTYPE HTML>
<html>
    <head>
		<script type="text/javascript" src="Scripts/HandleDate.js"></script>
		<script type="text/javascript" src="Scripts/KPILocalStorage.js"></script>
		<script type="text/javascript" src="Scripts/elements.js"></script>
        <script>
            window.onload = function(){
                var canvas = document.getElementById("myCanvas");
                var context = canvas.getContext("2d");
                //context.canvas.width  = window.innerWidth;
                //context.canvas.height = window.innerHeight;


                // BACKGROUND SECTION

                // fill background
                context.beginPath();
                var grd = context.createLinearGradient(canvas.width/2, 0, canvas.width/2, 747);
                grd.addColorStop(1, "#93c572");
                grd.addColorStop(0, "#cccccc");
                context.fillStyle = grd;
                context.rect(0, 0, canvas.width, 747);
                context.fill();

                // draw image
                var imgBackground = new Image();

                imgBackground.onload = function(){
                    context.drawImage(imgBackground, 0, 0); // I don't draw using a function because if i do, the elements draw out of order
                    context.drawImage(imgBackground, 570, 0);
                    context.drawImage(imgBackground, 0, 210);
                    context.drawImage(imgBackground, 570, 210);
                    DrawCanvasPart1 ("myCanvas");
                }
                //imgBackground.src = "images/light_rock.jpg";
                DrawStripes("myCanvas", 0, 0, canvas.width, 747);
                    DrawCanvasPart1 ("myCanvas");
            };

            function DrawCanvasPart1 (c)
            {
                var canvas = document.getElementById(c);
                var context = canvas.getContext("2d");

                var imgSplitter = new Image();

                imgSplitter.onload = function(){
                    context.drawImage(imgSplitter, 0, 747, canvas.width, 200);  // however, not using a draw function means that this rarely appears... BUGGGGGG!
                    DrawCanvasPart2 ("myCanvas");
                }
                imgSplitter.src = "images/splitter.png";
            }


            function DrawCanvasPart2 (c)
            {
                var canvas = document.getElementById(c);
                var context = canvas.getContext("2d");

                // data
                var month = "May";
                var year = "2012";
                var date = new Date;

                // fake kpi
                var kpiUsedVehicleSales = "1467";


                // draw circles

                var circleColor = "#ededed"
                context.fillStyle = circleColor;
                context.strokeStyle = circleColor;


                context.beginPath(); // top left
                context.arc(canvas.width/4, 200, 120, 0, 2 * Math.PI, false);
                context.fill();

                context.beginPath(); // top right
                context.arc((canvas.width/2) + 290, 200, 120, 0, 2 * Math.PI, false);
                context.fill();

                context.beginPath(); // middle left
                context.arc(canvas.width/4, 490, 120, 0, 2 * Math.PI, false);
                context.fill();

                context.beginPath(); // bottom left
                context.arc(canvas.width/4, 780, 120, 0, 2 * Math.PI, false);
                context.fill();

                context.lineWidth = 77; // define line properties
                context.lineCap = "butt";

                context.beginPath(); // vertical line
                context.moveTo(canvas.width/4, 200);
                context.lineTo(canvas.width/4, 780);
                context.stroke();

                context.beginPath(); // horizontal line
                context.moveTo(canvas.width/4, 200);
                context.lineTo(canvas.width/2 + 290, 200);
                context.stroke();

                var imageObj = new Image();
             
                imageObj.onload = function(){
                    context.drawImage(imageObj, canvas.width/4-111, 650);
                };
                imageObj.src = "images/PointingDude.png";


            // GRAPHICS SECTION

                Used_Vehicle_Sale("myCanvas", canvas.width/4-75, 135, 150, 130, [date, GetKPI(date, "Used_Vehicle_Sales")]);

                Retail_Sale("myCanvas", canvas.width/4-75, 415, 77, 76, [date, GetKPI(date, "Retail_Sales")]);

                Cost_Per_Sale("myCanvas", canvas.width/2 + 290 - 88, 130, 122, 80, [date, GetKPI(date, "Cost_Per_Sale")]);
        
                Pump_In_Sale("myCanvas", canvas.width/4+212, 330, canvas.width - (canvas.width/4+212), 370, [[GetKPI(date, "Pump_In_Sales_Anytown_Automotive"), "Anytown Automotive", "#ff9b00"], [GetKPI(date, "Pump_In_Sale_Allan_Automart"), "Allan Automart", "#f54c08"], [GetKPI(date, "Pump_In_Sale_Jefferson_Automotive"), "Jefferson Automotive", "#b4213f"], [GetKPI(date, "Pump_In_Sale_Nestor_Auto_Center"), "Nestor Auto Center", "#69039d"], [GetKPI(date, "Pump_In_Sale_Diamond_Automotive"), "Diamond Automotive", "#283577"], [GetKPI(date, "Pump_In_Sale_Anthony_Motors"), "Anthony Motors", "#66a5c7"]]);
                //DrawStripes("myCanvas", 0, 0, canvas.width, canvas.height);


                //DrawX("myCanvas",100, 600);

            // TEXT SECTION


            }
 
        </script>
    </head>
    <body>
        <canvas id="myCanvas" width="1000" height="1500">
        </canvas>
    </body>
</html>
